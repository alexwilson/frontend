!function(t){"undefined"!=typeof module&&"object"==typeof exports?module.exports="undefined"!=typeof window?t():t:window.Popover=t()}(function(){var t=function(t,e){this.link="object"==typeof t?t:document.querySelector(t),this.title=this.link.getAttribute("data-title")||null,this.content=this.link.getAttribute("data-content")||null,this.popover=null,this.options={},this.options.template=e.template?e.template:null,this.options.trigger=e.trigger?e.trigger:"hover",this.options.animation=e.animation&&"true"!==e.animation?e.animation:"true",this.options.placement=e.placement?e.placement:"top",this.options.delay=parseInt(e.delay)||100,this.duration=150,this.options.duration=document.documentElement.classList.contains("ie")?0:e.duration||this.duration,this.options.container=document.body,(this.content||this.options.template)&&this.init(),this.timer=0,this.rect=null};t.prototype={init:function(){this.actions(),"hover"===this.options.trigger?(this.link.addEventListener("mouseenter",this.open,!1),this.link.addEventListener("mouseleave",this.close,!1)):"click"===this.options.trigger?(this.link.addEventListener("click",this.toggle,!1),this.link.addEventListener("blur",this.close,!1)):"focus"===this.options.trigger&&(this.link.addEventListener("focus",this.toggle,!1),this.link.addEventListener("blur",this.close,!1)),document.documentElement.classList.contains("ie")||"focus"!==this.options.trigger&&"click"!==this.options.trigger||window.addEventListener("resize",this.close,!1)},actions:function(){var t=this;this.toggle=function(e){null===t.popover?t.open():t.close()},this.open=function(e){clearTimeout(t.link.getAttribute("data-timer")),t.timer=setTimeout(function(){null===t.popover&&(t.createPopover(),t.stylePopover(),t.updatePopover())},t.options.duration),t.link.setAttribute("data-timer",t.timer)},this.close=function(e){clearTimeout(t.link.getAttribute("data-timer")),t.timer=setTimeout(function(){t.popover&&null!==t.popover&&t.popover.classList.contains("in")&&(t.popover.classList.remove("in"),setTimeout(function(){t.removePopover()},t.options.duration))},t.options.delay+t.options.duration),t.link.setAttribute("data-timer",t.timer)},this.removePopover=function(){this.popover&&this.options.container.removeChild(this.popover),this.popover=null,this.timer=null},this.createPopover=function(){if(this.popover=document.createElement("div"),null!==this.content&&null===this.options.template){this.popover.setAttribute("role","tooltip");var t=document.createElement("div");if(t.setAttribute("class","arrow"),null!==this.title){var e=document.createElement("h3");e.setAttribute("class","popover-title"),e.innerHTML=this.title,this.popover.appendChild(e)}var i=document.createElement("div");i.setAttribute("class","popover-content"),this.popover.appendChild(t),this.popover.appendChild(i),i.innerHTML=this.content}else{var o=document.createElement("div");o.innerHTML=this.options.template,this.popover.innerHTML=o.firstChild.innerHTML}this.options.container.appendChild(this.popover),this.popover.style.display="block"},this.stylePopover=function(t){this.rect=this.getRect();var e=t||this.options.placement,i="true"===this.options.animation?"fade":"";this.popover.setAttribute("class","popover "+e+" "+i);var o={w:this.link.offsetWidth,h:this.link.offsetHeight},n=this.popoverDimensions(this.popover),s={w:n.w,h:n.h},r=this.getScroll().y,p=this.getScroll().x;/top/.test(e)?(this.popover.style.top=this.rect.top+r-s.h+"px",this.popover.style.left=this.rect.left+p-s.w/2+o.w/2+"px"):/bottom/.test(e)?(this.popover.style.top=this.rect.top+r+o.h+"px",this.popover.style.left=this.rect.left+p-s.w/2+o.w/2+"px"):/left/.test(e)?(this.popover.style.top=this.rect.top+r-s.h/2+o.h/2+"px",this.popover.style.left=this.rect.left+p-s.w+"px"):/right/.test(e)&&(this.popover.style.top=this.rect.top+r-s.h/2+o.h/2+"px",this.popover.style.left=this.rect.left+p+o.w+"px")},this.updatePopover=function(){var e=null;e=t.isElementInViewport(t.popover)?t.options.placement:t.updatePlacement(),t.stylePopover(e),t.popover.classList.add("in")},this.updatePlacement=function(){var t=this.options.placement;return/top/.test(t)?"bottom":/bottom/.test(t)?"top":/left/.test(t)?"right":/right/.test(t)?"left":void 0},this.getRect=function(){return this.link.getBoundingClientRect()},this.getScroll=function(){return{y:window.pageYOffset||document.documentElement.scrollTop,x:window.pageXOffset||document.documentElement.scrollLeft}},this.popoverDimensions=function(t){return{w:t.offsetWidth,h:t.offsetHeight}},this.isElementInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}}};var e=document.querySelectorAll("[data-toggle=popover]");return[].forEach.call(e,function(e,i){var o={};return o.trigger=e.getAttribute("data-trigger"),o.animation=e.getAttribute("data-animation"),o.duration=e.getAttribute("data-duration"),o.placement=e.getAttribute("data-placement"),o.delay=e.getAttribute("data-delay"),new t(e,o)}),t});