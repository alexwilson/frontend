{"version":3,"file":"component---src-templates-article-js-e7c4fee36703e5771c74.js","mappings":"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","sources":["webpack://@alexwilson/personal-website/../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://@alexwilson/personal-website/../../components/legacy-components/src/form/form.jsx","webpack://@alexwilson/personal-website/../../components/legacy-components/src/form/input.jsx","webpack://@alexwilson/personal-website/../../components/legacy-components/src/form/inline-group.jsx","webpack://@alexwilson/personal-website/../../components/legacy-components/src/form/textarea.jsx","webpack://@alexwilson/personal-website/../../components/legacy-components/src/form/submit.jsx","webpack://@alexwilson/personal-website/../../components/legacy-components/src/share-widget/index.js","webpack://@alexwilson/personal-website/../../components/legacy-components/src/share-widget/share-widget.js","webpack://@alexwilson/personal-website/../../components/legacy-components/src/webmentions/webmentions.js","webpack://@alexwilson/personal-website/../../components/legacy-components/src/webmentions/index.js","webpack://@alexwilson/personal-website/./src/schema-org/article.js","webpack://@alexwilson/personal-website/./src/components/related-articles.js","webpack://@alexwilson/personal-website/./src/templates/article.js"],"sourcesContent":["export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}","import React from 'react'\nexport default function Form({children, ...props}) {\n  return (\n    <form className=\"alex-form\" {...props}>\n      {children}\n    </form>\n  )\n}\n","import React from 'react'\n\nexport default function Input({children, ...props}) {\n  return (\n    <input className=\"alex-form__input\" {...props}>{children}</input>\n  )\n}\n","import React from 'react'\n\nexport default function InlineGroup({children, ...props}) {\n  return (\n    <div class=\"alex-form__inline-group\" {...props}>\n        {children}\n    </div>\n  )\n}\n","import React from 'react'\n\nexport default function TextArea({children, ...props}) {\n  return (\n    <textarea className=\"alex-form__input alex-form__input--textarea\">\n      {children}\n    </textarea>\n  )\n}\n","import React from 'react'\n\nexport default function Submit({value}) {\n  return (\n    <button\n      className=\"alex-form__input alex-form__input--submit\"\n      type=\"submit\"\n    >{value ? value : \"Submit\"}</button>\n  )\n}\n","import './share-widget.scss'\nimport ShareWidget from './share-widget'\nexport {ShareWidget}\nexport default ShareWidget\n","import React from 'react'\n\nconst ShareWidget = ({url, title}) => (\n  <div className=\"alex-share\">\n    <h3 className=\"share\">Share</h3>\n    <ul>\n      <li>\n        <a href={`https://twitter.com/intent/tweet?url=${url}&amp;text=${title}&amp;related=AlexWilsonV1&amp;via=AlexWilsonV1`}>\n          <img src=\"/svg/twitter.svg\" alt=\"Twitter\" title=\"Share on Twitter\" />\n        </a>\n      </li>\n      <li>\n        <a href={`http://www.facebook.com/sharer.php?u=${url}&amp;t=${title}`}>\n          <img src=\"/svg/facebook.svg\" alt=\"Facebook\" title=\"Share on Facebook\" />\n        </a>\n      </li>\n      <li>\n        <a href={`http://www.linkedin.com/shareArticle?mini=true&amp;url=${url}&amp;title=${title}`}>\n          <img src=\"/svg/linkedin.svg\" alt=\"LinkedIn\" title=\"Share on LinkedIn\" />\n        </a>\n      </li>\n      <li>\n        <a href={`http://reddit.com/submit?url=${url}&amp;title=${title}`}>\n          <img src=\"/svg/reddit.svg\" alt=\"Reddit\" title=\"Share on Reddit\" />\n        </a>\n      </li>\n    </ul>\n  </div>\n)\n\nexport default ShareWidget\n","import fetch from \"isomorphic-fetch\"\nimport React, {Component} from \"react\"\nimport ResponsiveImage from '../responsive-image'\n\nconst webmentionExtractor = wmProperty => mention => mention['wm-property'] === wmProperty\nconst likesFromWebmentions = webmentions => webmentions.filter(webmentionExtractor('like-of'))\nconst mentionsFromWebmentions = webmentions => webmentions.filter(webmentionExtractor('mention-of'))\nconst repostsFromWebmentions = webmentions => webmentions.filter(webmentionExtractor('repost-of'))\nconst repliesFromWebmentions = webmentions => webmentions.filter(webmentionExtractor('reply-of'))\n\nfunction Face({webmention}) {\n  return <a href={webmention.author.url} title={webmention.author.name}>\n    <ResponsiveImage src={webmention.author.photo} width={64} height={64} quality={'lossless'} format={'png'} />\n  </a>\n}\n\nfunction Facestack({webmentions}) {\n  return <ul>{webmentions.map(webmention =>\n      <li key={webmention['wm-id']}><Face webmention={webmention} /></li>\n  )}</ul>\n}\n\nexport default class Webmentions extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      error: null,\n      isLoaded: false,\n      mentions: [],\n      reposts: [],\n      replies: [],\n      likes: []\n    }\n  }\n\n  async fetchWebmentions(urls) {\n    const webmentions = await Promise.all(\n      urls.map(url => fetch(`https://webmention.io/api/mentions.jf2?target=${url}`)\n        .then(res => res.json())\n        .then(feed => feed.children)\n      )\n    )\n    .then(responses => responses.reduce(\n      (all, fragment) => all.concat(fragment), [])\n    )\n    .catch(console.error)\n\n    this.setState({\n      reposts: repostsFromWebmentions(webmentions),\n      mentions: mentionsFromWebmentions(webmentions),\n      likes: likesFromWebmentions(webmentions),\n      replies: repliesFromWebmentions(webmentions)\n    })\n  }\n\n  componentDidMount() {\n    const urls = this.props.urls || []\n    if (this.props.url) {\n      urls.push(this.props.url)\n    }\n    if (urls.length > 0) {\n      this.fetchWebmentions(urls)\n    }\n  }\n\n  render() {\n\n    const {likes, replies, reposts, mentions} = this.state\n\n    const hasLikes = likes.length > 0\n    const hasReplies = replies.length > 0\n    const hasReposts = reposts.length > 0\n    const hasMentions = mentions.length > 0\n\n    return (this.isLoaded === false) ? null : (\n      <div className=\"alex-webmentions\">\n\n        {!hasLikes ? null :\n        <div className=\"alex-webmentions__likes\">\n          <h3>Likes</h3>\n          <Facestack webmentions={likes} />\n        </div>}\n\n        {!hasReposts ? null :\n        <div className=\"alex-webmentions__reposts\">\n          <h3>Reposts</h3>\n          <Facestack webmentions={reposts} />\n        </div>}\n\n        {/* <div className=\"alex-webmentions--comments\">\n        {[...replies, ...mentions].map(comment =>\n            <a key={comment.author.url} href={comment.author.url} title={comment.author.name}>\n              <ResponsiveImage src={comment.author.photo} />\n              <div __dangerouslySetInnerHTML={{html: comment.content.html}}></div>\n            </a>\n          )}\n        </div> */}\n      </div>\n    )\n  }\n}\n\n","import './webmentions.scss'\nimport Webmentions from './webmentions'\nexport {Webmentions}\nexport default Webmentions\n","import Organization from './organization'\nimport Person from './person'\n\nconst Article = ({\n  url = '',\n  title = '',\n  image = '',\n  description = '',\n  dateModified = new Date(),\n  datePublished = new Date()\n}) => ({\n  '@context':'http://schema.org',\n  '@type':'Article',\n  'mainEntityOfPage': {\n    '@type':'WebPage',\n    '@id':url\n  },\n  'url': url,\n  'headline':title,\n  'dateModified': dateModified.toISOString(),\n  'datePublished': datePublished.toISOString(),\n  'publisher': Organization(),\n  'author': Person(),\n  'image': image,\n  'description': description,\n})\n\nexport default Article\n","import React from 'react'\nimport { useStaticQuery, graphql } from \"gatsby\"\nimport ArticleCard from \"@alexwilson/legacy-components/src/article-card\"\n\nexport default ({article: currentArticle}) => {\n  const data = useStaticQuery(graphql`\n    query RelatedArticles {\n      posts: allContent(\n        sort: { order: DESC, fields: [date] }\n        filter: {\n          type: {eq: \"posts\"}\n        }\n        limit: 1000\n      ) {\n        nodes {\n          contentId\n          slug\n          date\n          title\n          topics {\n            topicId\n            topic\n            slug\n          }\n        }\n      }\n    }\n  `)\n\n  const currentArticleTopics = currentArticle.topics.map(topic => topic.topicId) || []\n\n  const maxArticles = 3\n  const relatedArticles = new Set()\n  for (let granularity = 6; granularity >= 0; granularity--) {\n    if (relatedArticles.size >= maxArticles) break;\n\n    for (const article of data.posts.nodes) {\n      if (article.contentId === currentArticle.contentId) continue;\n      if (relatedArticles.size >= maxArticles) break;\n\n      const isWeeknote = (article.topics.filter(({topic}) => topic == \"weeknotes\").length > 0)\n\n      // Hack to reduce relevance of weeknotes.\n      if (granularity >= 1 && isWeeknote) {\n        continue\n      }\n\n      let similarity = 0\n\n      for (const topic of article.topics) {\n        if (currentArticleTopics.includes(topic.topicId)) {\n          similarity++;\n        }\n      }\n\n      // Match to avoid processing articles multiple times.\n      if (similarity >= granularity && !relatedArticles.has(article)) {\n        relatedArticles.add(article)\n      }\n    }\n\n  }\n\n  return (\n    <>\n      {Array.from(relatedArticles.values()).map(\n        (article) => <ArticleCard key={article.contentId} article={article} withBody={false} withDate={false}\n      />)}\n    </>\n  )\n}\n","import React from \"react\"\nimport { graphql, Link } from \"gatsby\"\n\nimport { format } from \"date-fns\"\n\nimport Header from \"@alexwilson/legacy-components/src/header\"\nimport ShareWidget from \"@alexwilson/legacy-components/src/share-widget\"\nimport Webmentions from \"@alexwilson/legacy-components/src/webmentions\"\nimport { Form, InlineGroup, Input, Submit } from \"@alexwilson/legacy-components/src/form\"\n\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport Article from \"../schema-org/article\";\nimport RelatedArticles from \"../components/related-articles\"\n\nconst InfoBox = ({ icon, children }) => (\n  <p class=\"alex-article__infobox\">\n    {children}\n  </p>\n)\n\nconst ArticleTemplate = ({ data, location }) => {\n  const post = data.content\n  const url = new URL(location.pathname, data.site.siteMetadata.siteUrl)\n  const alternativeUrls = post.deprecatedFields.legacySlugs.map(slug => new URL(slug, data.site.siteMetadata.siteUrl))\n\n  const datePublished = new Date(post.date)\n  const dateModified = new Date(post.flast_modified_at || datePublished)\n\n  return (\n    <Layout location={location}>\n      <Header location={location} image={post.image.image} linkImplementation={Link} />\n      <div className=\"alex-article\">\n        <h1 class=\"alex-article__headline\" itemProp=\"name headline\">{post.title}</h1>\n        <div className=\"alex-article__main\">\n          <div className=\"alex-article__byline\">\n            Posted\n\n            {(post.author && post.author.name ?\n              <>\n                {` by `}\n                <span itemProp=\"author\" itemType=\"http://schema.org/Person\">\n                  <a href=\"/\">\n                    <span itemProp=\"name\">Alex</span>\n                  </a>\n                </span>\n              </>\n              : null)}\n\n            {(datePublished ?\n              <>\n                {` on `}\n                <time\n                  className=\"alex-article__main__date\"\n                  dateTime={datePublished}\n                  itemProp=\"datePublished\"\n                >{format(new Date(post.date), \"PPPP\")}</time>.\n              </>\n              : null)}\n\n            {(post.image.credit ?\n              <>\n                {` ${post.image.credit}`}\n              </>\n              : null)}\n\n          </div>\n          <article\n            dangerouslySetInnerHTML={{ __html: post.content.html }}\n            className=\"alex-article__body article-description\"\n            itemProp=\"articleBody\"\n          />\n\n          <footer>\n            <InfoBox>\n              If you enjoyed this article and want to read more, you can follow me:\n              <ul style={{ marginTop: 0 }}>\n                <li class=\"bullet--rss\"><a href=\"/feed.xml\">With your feed reader</a>,</li>\n                <li class=\"bullet--twitter\">{`On `}\n                  <a rel=\"me\" href=\"https://twitter.com/alexwilsonv1\">Twitter</a>{` , `}\n                  <a rel=\"me\" href=\"https://bsky.app/profile/alexwilson.bsky.social\">Bluesky</a>{` or `}\n                  <a rel=\"me\" href=\"https://mastodon.social/@alexwilson\">Mastodon</a>,\n                </li>\n                <li class=\"bullet--email\">\n                  <label for=\"subscribe_by_email\">And in your inbox, by email:</label>\n                  <Form action=\"https://tech.us21.list-manage.com/subscribe/post?u=e0869bce049cbcd034fc8edd2&amp;id=7733fc6e4f&amp;f_id=00ef5be1f0\" method=\"post\" rel=\"noreferrer\" target=\"_blank\">\n                    <InlineGroup>\n                      <Input placeholder=\"Your email address\" type=\"email\" name=\"EMAIL\" id=\"subscribe_by_email\" />\n                      <Submit value=\"Subscribe\" />\n                    </InlineGroup>\n                  </Form>\n                </li>\n              </ul>\n              Before you go, if you're here via social media: Please leave a like, reply or repost. It really helps with reach!\n            </InfoBox>\n          </footer>\n\n          <div class=\"alex-article__sharing-block\">\n\n          </div>\n\n        </div>\n\n\n        <div className=\"alex-article__aside\">\n\n          <div className=\"alex-article__aside-start\">\n\n            {post.topics ?\n              <div className=\"alex-article__topics\">\n                <strong>Topics: </strong>\n                <ul>\n                  {post.topics.map(topic => {\n                    return <li key={topic.topicId}>\n                      <Link to={topic.slug}>{topic.topic}</Link>\n                    </li>\n                  })}\n                </ul>\n              </div> : null}\n\n          </div>\n\n          <div className=\"alex-article__aside-mid\">\n\n            <div className=\"alex-article__recommended\">\n              <h2>Read Next</h2>\n              <RelatedArticles article={post} />\n            </div>\n\n          </div>\n\n          <div className=\"alex-article__aside-bottom alex-article__sharing-block\">\n\n            <ShareWidget title={post.title} url={url} />\n            <Webmentions urls={[url, `${url}/`, ...alternativeUrls]} />\n\n          </div>\n\n        </div>\n\n      </div>\n      <SEO title={post.title} description={post.content.excerpt} url={url} image={`${url}/twitter-card.jpg`}>\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\n        <meta name=\"twitter:description\" content={post.content.excerpt} />\n        <meta name=\"twitter:site\" content=\"@alexwilsonv1\" />\n        <meta name=\"twitter:title\" content={post.title} />\n        <meta name=\"twitter:image\" content={`${url}/twitter-card.jpg`} />\n        <script type=\"application/ld+json\">{JSON.stringify(Article({\n          url: url,\n          title: post.title,\n          image: post.image.image,\n          description: post.content.excerpt,\n          dateModified: dateModified,\n          datePublished: datePublished\n        }))}</script>\n      </SEO>\n    </Layout>\n  )\n}\n\nexport default ArticleTemplate\n\nexport const pageQuery = graphql`\n  fragment ArticleContent on MarkdownRemark {\n    html\n    excerpt: excerpt\n  }\n  query BlogPostBySlug($contentId: String!) {\n    content(contentId: {eq: $contentId}) {\n      contentId\n      title\n      author {\n        name\n      }\n      topics {\n        topicId\n        topic\n        slug\n      }\n      date\n      image {\n        image\n        credit\n      }\n      content: parent {\n        ...ArticleContent\n      }\n      slug\n      deprecatedFields {\n        legacySlugs\n      }\n    }\n    site {\n      siteMetadata {\n        siteUrl\n      }\n    }\n  }\n`\n"],"names":["_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","Form","_ref","children","props","_excluded","React","assign","className","Input","InlineGroup","class","TextArea","Submit","value","type","url","title","href","src","alt","webmentionExtractor","wmProperty","mention","likesFromWebmentions","webmentions","filter","mentionsFromWebmentions","repostsFromWebmentions","repliesFromWebmentions","Face","webmention","author","name","ResponsiveImage","photo","width","height","quality","format","Facestack","_ref2","map","Webmentions","_Component","_this","call","state","error","isLoaded","mentions","reposts","replies","likes","_inheritsLoose","_proto","prototype","fetchWebmentions","_fetchWebmentions","_asyncToGenerator","_regeneratorRuntime","_callee","urls","_context","prev","next","Promise","all","fetch","then","res","json","feed","responses","reduce","fragment","concat","catch","console","sent","this","setState","stop","_x","apply","arguments","componentDidMount","push","render","_this$state","hasLikes","hasReposts","Component","_ref$url","_ref$title","_ref$image","image","_ref$description","description","_ref$dateModified","dateModified","Date","_ref$datePublished","datePublished","toISOString","Organization","Person","currentArticle","article","data","useStaticQuery","currentArticleTopics","topics","topic","topicId","relatedArticles","Set","granularity","size","_step","_iterator","_createForOfIteratorHelperLoose","posts","nodes","done","contentId","isWeeknote","_step2","similarity","_iterator2","includes","has","add","Array","from","values","ArticleCard","withBody","withDate","InfoBox","icon","location","post","content","URL","pathname","site","siteMetadata","siteUrl","alternativeUrls","deprecatedFields","legacySlugs","slug","date","flast_modified_at","Layout","Header","linkImplementation","Link","itemProp","itemType","dateTime","credit","dangerouslySetInnerHTML","__html","html","style","marginTop","rel","for","action","method","placeholder","id","to","RelatedArticles","ShareWidget","_toConsumableArray","SEO","excerpt","JSON","stringify","Article"],"sourceRoot":""}