<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.d64d6e8a940ad0ff24d8.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#8292a2}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.command-line-prompt{border-right:1px solid #999;display:block;float:left;font-size:100%;letter-spacing:-1px;margin-right:1em;pointer-events:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.command-line-prompt>span:before{color:#999;content:" ";display:block;padding-right:.8em}.command-line-prompt>span[data-user]:before{content:"[" attr(data-user) "@" attr(data-host) "] $"}.command-line-prompt>span[data-user=root]:before{content:"[" attr(data-user) "@" attr(data-host) "] #"}.command-line-prompt>span[data-prompt]:before{content:attr(data-prompt)}.alex-share ul{display:block;list-style-type:none;margin:0;padding:0}.alex-share ul li{display:inline}.alex-share ul li img{height:2rem;width:2rem}.alex-header{border-bottom:3px solid #0d0d0d;overflow:hidden;z-index:100}.alex-header--container{margin:0 auto;max-width:1000px;width:90%}.alex-header__nav{display:flex;list-style:none;margin:0;padding:0}.alex-header__nav-item{flex-basis:auto;overflow:hidden;white-space:nowrap}.alex-header__nav-item--spacer{margin-left:auto;margin-right:auto}.alex-header__nav-item a,.alex-header__nav-item a:visited{border-bottom:.5rem solid transparent;color:#fff;display:block;font-size:1.1916666667rem;padding:1rem;position:relative}@media screen and (min-width:48em){.alex-header__nav-item a,.alex-header__nav-item a:visited{font-size:1.0928571429rem}}@media screen and (min-width:62em){.alex-header__nav-item a,.alex-header__nav-item a:visited{font-size:1.0866666667rem}}@media screen and (min-width:75em){.alex-header__nav-item a,.alex-header__nav-item a:visited{font-size:.9941176471rem}}.alex-header__nav-item a:hover,.alex-header__nav-item a:visited:hover{border-bottom:.5rem solid #aaa;color:#aaa!important}.alex-header__nav-item a:visited img.large,.alex-header__nav-item a img.large{-webkit-filter:invert(1);filter:invert(1);height:1.6rem;margin:-1rem 0;padding:.25rem 0;width:1.6rem}.alex-header__nav-item--active a{border-bottom:.5rem solid #fff!important}.alex-header__intro{font-size:1rem}.alex-header__about{color:#fff;display:block;font-weight:500;padding:1em 0 0;text-align:center;width:100%}@media(min-width:769px){.alex-header__about{padding-bottom:1em;padding-top:3em}}@media(min-width:993px){.alex-header__about{padding-bottom:3em;padding-top:5em}}@media(min-width:1201px){.alex-header__about{padding-bottom:4em;padding-top:6em}}.alex-header__about .read-more{font-size:smaller;font-style:italic}.alex-header__name{color:#fff;font-size:40pt;font-weight:700;text-transform:none;white-space:nowrap}.alex-header-image:after{background-image:linear-gradient(180deg,rgba(96,92,96,.6),hsla(0,0%,8%,.6));bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:-95}.alex-header-image__blur,.alex-header-image__main{height:100%;-o-object-fit:cover;object-fit:cover;position:absolute;transition:opacity 1.4s linear;width:100%;z-index:-95}.alex-header-image__main{opacity:0}.alex-header-image__blur{-webkit-filter:blur(100px);filter:blur(100px);opacity:1;-webkit-transform:scale(1.02);transform:scale(1.02);z-index:-100}.alex-webmentions__likes ul{list-style-type:none;padding:0}.alex-webmentions__likes ul li{display:inline}.alex-webmentions__likes img{border-radius:50% 50%;height:32px;-o-object-fit:cover;object-fit:cover;width:32px}.alex-webmentions__reposts ul{list-style-type:none;padding:0}.alex-webmentions__reposts ul li{display:inline}.alex-webmentions__reposts img{border-radius:50% 50%;height:32px;-o-object-fit:cover;object-fit:cover;width:32px}.footer{color:gray}.footer__social-link{-webkit-filter:brightness(2);filter:brightness(2);height:.8rem;width:.8rem}body,html{background-color:#fff;margin:0;padding:0}img.responsive{max-width:100%}.main-content{min-height:250px;padding-bottom:50px;text-align:center}.main-content__secondary{margin:0 auto;max-width:660px}.alex-home{margin:0 auto;max-width:1000px;width:90%}.alex-home__section{clear:both;display:flex;flex-wrap:wrap;padding-bottom:1em}.alex-home__section:after,.alex-home__section:before{content:"";display:table;display:flex}.alex-home__section:after{clear:both}.alex-home__tilestack-item{box-sizing:border-box;display:block;flex:10 1;float:left;max-width:100%;min-width:100%}@media(min-width:577px){.alex-home__tilestack-item{box-sizing:border-box;display:block;flex:5 1;float:left;max-width:50%;min-width:50%}}@media(min-width:769px){.alex-home__tilestack-item{box-sizing:border-box;display:block;flex:3 1;float:left;max-width:30%;min-width:30%}}.alex-home__tilestack-item .alex-card{border-bottom:none}.alex-article{clear:both;display:flex;flex-wrap:wrap;margin:0 auto;max-width:1000px;width:90%}.alex-article:after,.alex-article:before{content:"";display:table;display:flex}.alex-article:after{clear:both}.alex-article__main{box-sizing:border-box;display:block;flex:10 1;float:left;margin:0 auto;max-width:100%;min-width:100%}@media(min-width:769px){.alex-article__main{box-sizing:border-box;display:block;flex:8 1;float:left;max-width:80%;min-width:80%}}@media(min-width:993px){.alex-article__main{box-sizing:border-box;display:block;flex:7 1;float:left;max-width:70%;min-width:70%}}.alex-article__aside,.alex-article__main--wide{box-sizing:border-box;display:block;flex:10 1;float:left;max-width:100%;min-width:100%}@media(min-width:769px){.alex-article__aside{box-sizing:border-box;display:block;flex:2 1;float:left;max-width:20%;min-width:20%;padding-left:1em;padding-right:1em}}@media(min-width:993px){.alex-article__aside{box-sizing:border-box;display:block;flex:3 1;float:left;max-width:30%;min-width:30%}}.alex-article__topics{display:none}@media(min-width:769px){.alex-article__topics{display:block;position:relative;top:10rem}}.alex-article__topics ul{display:inline;list-style:none;margin:0;padding:0}.alex-article__topics li{display:inline}.alex-article__topics li:after{content:", "}.alex-article__topics li:last-child:after{content:""}.alex-article__topics li:nth-last-child(2):after{content:", and "}@media(min-width:769px){.alex-article__recommended{position:absolute;top:120%;z-index:0}}.alex-article__image{background:no-repeat 50%;background-attachment:scroll;background-color:gray;background-size:cover;height:400px;margin-top:-4em}.alex-article__pane{clear:both;display:flex;flex-wrap:wrap}.alex-article__pane:after,.alex-article__pane:before{content:"";display:table;display:flex}.alex-article__pane:after{clear:both}.alex-article__pane-half{box-sizing:border-box;display:block;flex:10 1;float:left;max-width:100%;min-width:100%;padding-right:.5rem}@media(min-width:577px){.alex-article__pane-half{box-sizing:border-box;display:block;flex:5 1;float:left;max-width:50%;min-width:50%}}.alex-article__body img{max-width:100%}.alex-stream,.consultancy{margin:0 auto;max-width:1000px;width:90%}.consultancy{align-items:center;justify-content:center}.consultancy h1{font-size:2.3333333333rem;line-height:3rem;margin-bottom:.26999rem;padding-top:.73001rem;text-align:center}@media screen and (min-width:48em){.consultancy h1{font-size:2.1428571429rem;margin-bottom:.2071328571rem;padding-top:.7928671429rem}}@media screen and (min-width:62em){.consultancy h1{font-size:2.1333333333rem;margin-bottom:.20399rem;padding-top:.79601rem}}@media screen and (min-width:75em){.consultancy h1{font-size:2.3529411765rem;margin-bottom:.2764605882rem;padding-top:.7235394118rem}}.consultancy p{line-height:2rem;margin-bottom:1.43999rem;padding-top:.56001rem}@media screen and (min-width:48em){.consultancy p{margin-bottom:1.4007042857rem;padding-top:.5992957143rem}}@media screen and (min-width:62em){.consultancy p{margin-bottom:1.39599rem;padding-top:.60401rem}}@media screen and (min-width:75em){.consultancy p{margin-bottom:1.3882252941rem;padding-top:.6117747059rem}}.consultancy-lede{box-sizing:border-box;clear:both;display:flex;display:block;flex:10 1;flex-wrap:wrap;float:left;max-width:100%;min-width:100%;padding:1em}.consultancy-lede:after,.consultancy-lede:before{content:"";display:table;display:flex}.consultancy-lede:after{clear:both}.consultancy-service{border:1px solid #e6e6e6;clear:both;display:flex;flex-wrap:wrap;margin-bottom:1em}.consultancy-service:after,.consultancy-service:before{content:"";display:table;display:flex}.consultancy-service:after{clear:both}.consultancy-service__title{box-sizing:border-box;display:block;flex:10 1;float:left;margin-bottom:0;max-width:100%;min-width:100%;text-align:center}.consultancy-service__text{box-sizing:border-box;display:block;flex:8 1;float:left;line-height:2rem;margin-bottom:1.43999rem;margin-top:0;max-width:80%;min-width:80%;padding:0 1em 1em}@media screen and (min-width:48em){.consultancy-service__text{margin-bottom:1.4007042857rem;padding-top:.5992957143rem}}@media screen and (min-width:62em){.consultancy-service__text{margin-bottom:1.39599rem;padding-top:.60401rem}}@media screen and (min-width:75em){.consultancy-service__text{margin-bottom:1.3882252941rem;padding-top:.6117747059rem}}.consultancy-service__icon{box-sizing:border-box;display:block;flex:2 1;float:left;margin-top:0;max-width:20%;min-width:20%;padding:0 1em 1em;width:80%}.consultancy-divider{padding:1em 0}.consultancy-contact{clear:both;display:flex;flex-wrap:wrap}.consultancy-contact:after,.consultancy-contact:before{content:"";display:table;display:flex}.consultancy-contact:after{clear:both}.consultancy-contact form{box-sizing:border-box;display:block;flex:10 1;float:left;max-width:100%;min-width:100%}@media(min-width:577px){.consultancy-contact form{box-sizing:border-box;display:block;flex:6 1;float:left;max-width:60%;min-width:60%}}.consultancy-footer{align-content:center;justify-content:center;margin:0 auto;max-width:100%;width:90%}.consultancy-footer div{box-sizing:border-box;clear:both;display:flex;display:block;flex:10 1;flex-wrap:wrap;float:left;font-size:1.1916666667rem;line-height:2rem;margin-bottom:-.60676rem;max-width:100%;min-width:100%;padding-top:.60676rem;text-align:center}.consultancy-footer div:after,.consultancy-footer div:before{content:"";display:table;display:flex}.consultancy-footer div:after{clear:both}@media screen and (min-width:48em){.consultancy-footer div{font-size:1.0928571429rem;margin-bottom:-.6393671429rem;padding-top:.6393671429rem}}@media screen and (min-width:62em){.consultancy-footer div{font-size:1.0866666667rem;margin-bottom:-.64141rem;padding-top:.64141rem}}@media screen and (min-width:75em){.consultancy-footer div{font-size:.9941176471rem;margin-bottom:-.6719511765rem;padding-top:.6719511765rem}}.panel{background:#1a8cff}.panel-default{border-color:#feeddd}hr{border:0;border-top:1px solid #000}.embed-container{height:0;max-width:100%;overflow:hidden;padding-bottom:56.25%;position:relative}.embed-container embed,.embed-container iframe,.embed-container object{height:100%;left:0;position:absolute;top:0;width:100%}.alex-form{margin:0 auto;max-width:100%;width:90%}.alex-form__input::-webkit-input-placeholder{padding:.5em .6em}.alex-form__input:-ms-input-placeholder{padding:.5em .6em}.alex-form__input,.alex-form__input::placeholder,.alex-form__input:focus{padding:.5em .6em}.alex-form__input,.alex-form__input:focus{border:1px solid gray;box-sizing:border-box;clear:both;display:flex;display:block;flex:10 1;flex-wrap:wrap;float:left;line-height:2rem;margin-bottom:1.43999rem;max-width:100%;min-width:100%;padding-top:.56001rem}.alex-form__input:after,.alex-form__input:before,.alex-form__input:focus:after,.alex-form__input:focus:before{content:"";display:table;display:flex}.alex-form__input:after,.alex-form__input:focus:after{clear:both}@media screen and (min-width:48em){.alex-form__input,.alex-form__input:focus{margin-bottom:1.4007042857rem;padding-top:.5992957143rem}}@media screen and (min-width:62em){.alex-form__input,.alex-form__input:focus{margin-bottom:1.39599rem;padding-top:.60401rem}}@media screen and (min-width:75em){.alex-form__input,.alex-form__input:focus{margin-bottom:1.3882252941rem;padding-top:.6117747059rem}}img.responsive-image{max-width:100%}html{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;font-size:75%}@media screen and (min-width:48em){html{font-size:87.5%}}@media screen and (min-width:62em){html{font-size:93.75%}}@media screen and (min-width:75em){html{font-size:106.25%}}body{font-family:Georgia,serif;font-size:1.3333333333rem;font-style:normal;font-weight:400;line-height:2rem}@media screen and (min-width:48em){body{font-size:1.2142857143rem}}@media screen and (min-width:62em){body{font-size:1.2rem}}@media screen and (min-width:75em){body{font-size:1.1764705882rem}}a{color:#333;text-decoration:none;transition:color .1s,background-color .1s}a:active,a:focus,a:hover{color:gray;text-decoration:none}.alex-article__body li a,.alex-article__body p a,.alex-article__main__body li a,.alex-article__main__body p a,.typeset li a,.typeset p a{background-image:linear-gradient(180deg,transparent 50%,#666 0);background-position:0 93%;background-repeat:repeat-x;background-size:100% .15rem;font-family:Georgia,serif;text-shadow:.1rem 0 #fcfcfc,.15rem 0 #fcfcfc,-.1rem 0 #fcfcfc,-.15rem 0 #fcfcfc}.alex-article__body li a:active,.alex-article__body li a:focus,.alex-article__body li a:hover,.alex-article__body p a:active,.alex-article__body p a:focus,.alex-article__body p a:hover,.alex-article__main__body li a:active,.alex-article__main__body li a:focus,.alex-article__main__body li a:hover,.alex-article__main__body p a:active,.alex-article__main__body p a:focus,.alex-article__main__body p a:hover,.typeset li a:active,.typeset li a:focus,.typeset li a:hover,.typeset p a:active,.typeset p a:focus,.typeset p a:hover{background-image:linear-gradient(180deg,transparent 50%,#b3b3b3 0)}.alex-article__body p,.alex-article__main__body p,.typeset p{-webkit-font-feature-settings:"kern","onum","liga";font-feature-settings:"kern","onum","liga";font-family:Georgia,serif;line-height:2rem;margin-bottom:1.43999rem;padding-top:.56001rem}@media screen and (min-width:48em){.alex-article__body p,.alex-article__main__body p,.typeset p{margin-bottom:1.4007042857rem;padding-top:.5992957143rem}}@media screen and (min-width:62em){.alex-article__body p,.alex-article__main__body p,.typeset p{margin-bottom:1.39599rem;padding-top:.60401rem}}@media screen and (min-width:75em){.alex-article__body p,.alex-article__main__body p,.typeset p{margin-bottom:1.3882252941rem;padding-top:.6117747059rem}}.alex-article__body h1,.alex-article__body h2,.alex-article__body h3,.alex-article__body h4,.alex-article__body h5,.alex-article__body h6,.alex-article__main__body h1,.alex-article__main__body h2,.alex-article__main__body h3,.alex-article__main__body h4,.alex-article__main__body h5,.alex-article__main__body h6,.typeset h1,.typeset h2,.typeset h3,.typeset h4,.typeset h5,.typeset h6{-webkit-font-feature-settings:"dlig","liga","lnum","kern";font-feature-settings:"dlig","liga","lnum","kern";color:#2e2e2e;font-family:Helvetica,sans-serif;font-style:normal;font-weight:700}.alex-article__body .alpha,.alex-article__body h1,.alex-article__main__body .alpha,.alex-article__main__body h1,.typeset .alpha,.typeset h1{font-size:2.3333333333rem;line-height:3rem;margin-bottom:.26999rem;padding-top:.73001rem}@media screen and (min-width:48em){.alex-article__body .alpha,.alex-article__body h1,.alex-article__main__body .alpha,.alex-article__main__body h1,.typeset .alpha,.typeset h1{font-size:2.1428571429rem;margin-bottom:.2071328571rem;padding-top:.7928671429rem}}@media screen and (min-width:62em){.alex-article__body .alpha,.alex-article__body h1,.alex-article__main__body .alpha,.alex-article__main__body h1,.typeset .alpha,.typeset h1{font-size:2.1333333333rem;margin-bottom:.20399rem;padding-top:.79601rem}}@media screen and (min-width:75em){.alex-article__body .alpha,.alex-article__body h1,.alex-article__main__body .alpha,.alex-article__main__body h1,.typeset .alpha,.typeset h1{font-size:2.3529411765rem;margin-bottom:.2764605882rem;padding-top:.7235394118rem}}.alex-article__body .beta,.alex-article__body h2,.alex-article__main__body .beta,.alex-article__main__body h2,.typeset .beta,.typeset h2{font-size:2.0833333333rem;line-height:3rem;margin-bottom:.18749rem;padding-top:.81251rem}@media screen and (min-width:48em){.alex-article__body .beta,.alex-article__body h2,.alex-article__main__body .beta,.alex-article__main__body h2,.typeset .beta,.typeset h2{font-size:1.9rem;margin-bottom:.12699rem;padding-top:.87301rem}}@media screen and (min-width:62em){.alex-article__body .beta,.alex-article__body h2,.alex-article__main__body .beta,.alex-article__main__body h2,.typeset .beta,.typeset h2{font-size:1.8733333333rem;margin-bottom:.11819rem;padding-top:.88181rem}}@media screen and (min-width:75em){.alex-article__body .beta,.alex-article__body h2,.alex-article__main__body .beta,.alex-article__main__body h2,.typeset .beta,.typeset h2{font-size:2.0882352941rem;margin-bottom:.1891076471rem;padding-top:.8108923529rem}}.alex-article__body .gamma,.alex-article__body h3,.alex-article__main__body .gamma,.alex-article__main__body h3,.typeset .gamma,.typeset h3{font-size:1.8666666667rem;line-height:3rem;margin-bottom:.11599rem;padding-top:.88401rem}@media screen and (min-width:48em){.alex-article__body .gamma,.alex-article__body h3,.alex-article__main__body .gamma,.alex-article__main__body h3,.typeset .gamma,.typeset h3{font-size:1.7142857143rem;margin-bottom:.0657042857rem;padding-top:.9342957143rem}}@media screen and (min-width:62em){.alex-article__body .gamma,.alex-article__body h3,.alex-article__main__body .gamma,.alex-article__main__body h3,.typeset .gamma,.typeset h3{font-size:1.7066666667rem;margin-bottom:.06319rem;padding-top:.93681rem}}@media screen and (min-width:75em){.alex-article__body .gamma,.alex-article__body h3,.alex-article__main__body .gamma,.alex-article__main__body h3,.typeset .gamma,.typeset h3{font-size:1.7647058824rem;margin-bottom:.0823429412rem;padding-top:.9176570588rem}}.alex-article__body .delta,.alex-article__body h4,.alex-article__main__body .delta,.alex-article__main__body h4,.typeset .delta,.typeset h4{font-size:1.6666666667rem;line-height:2rem;margin-bottom:-.45001rem;padding-top:.45001rem}@media screen and (min-width:48em){.alex-article__body .delta,.alex-article__body h4,.alex-article__main__body .delta,.alex-article__main__body h4,.typeset .delta,.typeset h4{font-size:1.5214285714rem;margin-bottom:-.4979385714rem;padding-top:.4979385714rem}}@media screen and (min-width:62em){.alex-article__body .delta,.alex-article__body h4,.alex-article__main__body .delta,.alex-article__main__body h4,.typeset .delta,.typeset h4{font-size:1.5rem;margin-bottom:-.50501rem;padding-top:.50501rem}}@media screen and (min-width:75em){.alex-article__body .delta,.alex-article__body h4,.alex-article__main__body .delta,.alex-article__main__body h4,.typeset .delta,.typeset h4{font-size:1.5705882353rem;margin-bottom:-.4817158824rem;padding-top:.4817158824rem}}.alex-article__body .epsilon,.alex-article__body h5,.alex-article__main__body .epsilon,.alex-article__main__body h5,.typeset .epsilon,.typeset h5{font-size:1.4916666667rem;line-height:2rem;margin-bottom:-.50776rem;padding-top:.50776rem}@media screen and (min-width:48em){.alex-article__body .epsilon,.alex-article__body h5,.alex-article__main__body .epsilon,.alex-article__main__body h5,.typeset .epsilon,.typeset h5{font-size:1.3714285714rem;margin-bottom:-.5474385714rem;padding-top:.5474385714rem}}@media screen and (min-width:62em){.alex-article__body .epsilon,.alex-article__body h5,.alex-article__main__body .epsilon,.alex-article__main__body h5,.typeset .epsilon,.typeset h5{font-size:1.3666666667rem;margin-bottom:-.54901rem;padding-top:.54901rem}}@media screen and (min-width:75em){.alex-article__body .epsilon,.alex-article__body h5,.alex-article__main__body .epsilon,.alex-article__main__body h5,.typeset .epsilon,.typeset h5{font-size:1.3235294118rem;margin-bottom:-.5632452941rem;padding-top:.5632452941rem}}.alex-article__body .zeta,.alex-article__body h6,.alex-article__main__body .zeta,.alex-article__main__body h6,.typeset .zeta,.typeset h6{font-size:1.3333333333rem;line-height:2rem;margin-bottom:-.56001rem;padding-top:.56001rem}@media screen and (min-width:48em){.alex-article__body .zeta,.alex-article__body h6,.alex-article__main__body .zeta,.alex-article__main__body h6,.typeset .zeta,.typeset h6{font-size:1.2142857143rem;margin-bottom:-.5992957143rem;padding-top:.5992957143rem}}@media screen and (min-width:62em){.alex-article__body .zeta,.alex-article__body h6,.alex-article__main__body .zeta,.alex-article__main__body h6,.typeset .zeta,.typeset h6{font-size:1.2rem;margin-bottom:-.60401rem;padding-top:.60401rem}}@media screen and (min-width:75em){.alex-article__body .zeta,.alex-article__body h6,.alex-article__main__body .zeta,.alex-article__main__body h6,.typeset .zeta,.typeset h6{font-size:1.1764705882rem;margin-bottom:-.6117747059rem;padding-top:.6117747059rem}}.alex-article__body .eta,.alex-article__main__body .eta,.typeset .eta{font-size:1.1916666667rem;line-height:2rem;margin-bottom:-.60676rem;padding-top:.60676rem}@media screen and (min-width:48em){.alex-article__body .eta,.alex-article__main__body .eta,.typeset .eta{font-size:1.0928571429rem;margin-bottom:-.6393671429rem;padding-top:.6393671429rem}}@media screen and (min-width:62em){.alex-article__body .eta,.alex-article__main__body .eta,.typeset .eta{font-size:1.0866666667rem;margin-bottom:-.64141rem;padding-top:.64141rem}}@media screen and (min-width:75em){.alex-article__body .eta,.alex-article__main__body .eta,.typeset .eta{font-size:.9941176471rem;margin-bottom:-.6719511765rem;padding-top:.6719511765rem}}.alex-article__body .theta,.alex-article__main__body .theta,.typeset .theta{font-size:1.0666666667rem;line-height:2rem;margin-bottom:-.64801rem;padding-top:.64801rem}@media screen and (min-width:48em){.alex-article__body .theta,.alex-article__main__body .theta,.typeset .theta{font-size:.9714285714rem;margin-bottom:-.6794385714rem;padding-top:.6794385714rem}}@media screen and (min-width:62em){.alex-article__body .theta,.alex-article__main__body .theta,.typeset .theta{font-size:.96rem;margin-bottom:-.68321rem;padding-top:.68321rem}}@media screen and (min-width:75em){.alex-article__body .theta,.alex-article__main__body .theta,.typeset .theta{font-size:.8823529412rem;margin-bottom:-.7088335294rem;padding-top:.7088335294rem}}.alex-article__body .iota,.alex-article__main__body .iota,.typeset .iota{font-size:.9583333333rem;line-height:2rem;margin-bottom:-.68376rem;padding-top:.68376rem}@media screen and (min-width:48em){.alex-article__body .iota,.alex-article__main__body .iota,.typeset .iota{font-size:.9142857143rem;margin-bottom:-.6982957143rem;padding-top:.6982957143rem}}@media screen and (min-width:62em){.alex-article__body .iota,.alex-article__main__body .iota,.typeset .iota{font-size:.8733333333rem;margin-bottom:-.71181rem;padding-top:.71181rem}}@media screen and (min-width:75em){.alex-article__body .iota,.alex-article__main__body .iota,.typeset .iota{font-size:.7470588235rem;margin-bottom:-.7534805882rem;padding-top:.7534805882rem}}.alex-article__body ol,.alex-article__body ul,.alex-article__main__body ol,.alex-article__main__body ul,.typeset ol,.typeset ul{line-height:2rem;margin-bottom:1.43999rem;padding-top:.56001rem}@media screen and (min-width:48em){.alex-article__body ol,.alex-article__body ul,.alex-article__main__body ol,.alex-article__main__body ul,.typeset ol,.typeset ul{margin-bottom:1.4007042857rem;padding-top:.5992957143rem}}@media screen and (min-width:62em){.alex-article__body ol,.alex-article__body ul,.alex-article__main__body ol,.alex-article__main__body ul,.typeset ol,.typeset ul{margin-bottom:1.39599rem;padding-top:.60401rem}}@media screen and (min-width:75em){.alex-article__body ol,.alex-article__body ul,.alex-article__main__body ol,.alex-article__main__body ul,.typeset ol,.typeset ul{margin-bottom:1.3882252941rem;padding-top:.6117747059rem}}.alex-article__body ol li,.alex-article__body ul li,.alex-article__main__body ol li,.alex-article__main__body ul li,.typeset ol li,.typeset ul li{-webkit-font-feature-settings:"kern","onum","liga";font-feature-settings:"kern","onum","liga";font-family:Georgia,serif;margin-left:1rem}.alex-article__body ol li p,.alex-article__body ul li p,.alex-article__main__body ol li p,.alex-article__main__body ul li p,.typeset ol li p,.typeset ul li p{display:inline}@media(min-width:577px){.alex-article__body ol li,.alex-article__body ul li,.alex-article__main__body ol li,.alex-article__main__body ul li,.typeset ol li,.typeset ul li{margin-left:0}}.alex-article__body ol li ol,.alex-article__body ol li ul,.alex-article__body ul li ol,.alex-article__body ul li ul,.alex-article__main__body ol li ol,.alex-article__main__body ol li ul,.alex-article__main__body ul li ol,.alex-article__main__body ul li ul,.typeset ol li ol,.typeset ol li ul,.typeset ul li ol,.typeset ul li ul{margin-bottom:1rem;margin-left:1rem;padding-top:1rem}.alex-article__body ol,.alex-article__main__body ol,.typeset ol{list-style-type:none}.alex-article__body ol li,.alex-article__main__body ol li,.typeset ol li{counter-increment:top-level}.alex-article__body ol li:before,.alex-article__main__body ol li:before,.typeset ol li:before{-webkit-font-feature-settings:"lnum","tnum";font-feature-settings:"lnum","tnum";content:counter(top-level) ".";margin-left:-3rem;position:absolute;text-align:right;width:1em}.alex-article__body ol li ul li:before,.alex-article__main__body ol li ul li:before,.typeset ol li ul li:before{content:""}.alex-article__body ol li ul li ol li,.alex-article__main__body ol li ul li ol li,.typeset ol li ul li ol li{counter-increment:alt-level}.alex-article__body ol li ul li ol li:before,.alex-article__main__body ol li ul li ol li:before,.typeset ol li ul li ol li:before{content:counter(alt-level) "."}.alex-article__body ol li ol li,.alex-article__main__body ol li ol li,.typeset ol li ol li{counter-increment:sub-level}.alex-article__body ol li ol li:before,.alex-article__main__body ol li ol li:before,.typeset ol li ol li:before{content:counter(top-level) "." counter(sub-level)}.alex-article__body ol li ol li ul li:before,.alex-article__main__body ol li ol li ul li:before,.typeset ol li ol li ul li:before{content:""}.alex-article__body ol li ol li ol li,.alex-article__main__body ol li ol li ol li,.typeset ol li ol li ol li{counter-increment:sub-sub-level}.alex-article__body ol li ol li ol li:before,.alex-article__main__body ol li ol li ol li:before,.typeset ol li ol li ol li:before{content:counter(top-level) "." counter(sub-level) "." counter(sub-sub-level)}.alex-article__body dl,.alex-article__main__body dl,.typeset dl{line-height:2rem;margin-bottom:1.43999rem;padding-top:.56001rem}@media screen and (min-width:48em){.alex-article__body dl,.alex-article__main__body dl,.typeset dl{margin-bottom:1.4007042857rem;padding-top:.5992957143rem}}@media screen and (min-width:62em){.alex-article__body dl,.alex-article__main__body dl,.typeset dl{margin-bottom:1.39599rem;padding-top:.60401rem}}@media screen and (min-width:75em){.alex-article__body dl,.alex-article__main__body dl,.typeset dl{margin-bottom:1.3882252941rem;padding-top:.6117747059rem}}.alex-article__body dl dd,.alex-article__body dl dt,.alex-article__main__body dl dd,.alex-article__main__body dl dt,.typeset dl dd,.typeset dl dt{-webkit-font-feature-settings:"kern","onum","liga";font-feature-settings:"kern","onum","liga";margin-left:2rem}@media(min-width:577px){.alex-article__body dl dd,.alex-article__body dl dt,.alex-article__main__body dl dd,.alex-article__main__body dl dt,.typeset dl dd,.typeset dl dt{margin-left:0}}.alex-article__body dl dt,.alex-article__main__body dl dt,.typeset dl dt{font-weight:700}.alex-article__body dl dd+dt,.alex-article__main__body dl dd+dt,.typeset dl dd+dt{padding-top:1rem}.alex-article__body table,.alex-article__main__body table,.typeset table{-webkit-font-feature-settings:"liga","lnum","tnum","kern";font-feature-settings:"liga","lnum","tnum","kern";font-family:Helvetica,sans-serif;font-size:1.1916666667rem;font-style:normal;font-weight:400;line-height:2rem;margin-bottom:-.60676rem;padding-top:.60676rem;width:100%}@media screen and (min-width:48em){.alex-article__body table,.alex-article__main__body table,.typeset table{font-size:1.0928571429rem;margin-bottom:-.6393671429rem;padding-top:.6393671429rem}}@media screen and (min-width:62em){.alex-article__body table,.alex-article__main__body table,.typeset table{font-size:1.0866666667rem;margin-bottom:-.64141rem;padding-top:.64141rem}}@media screen and (min-width:75em){.alex-article__body table,.alex-article__main__body table,.typeset table{font-size:.9941176471rem;margin-bottom:-.6719511765rem;padding-top:.6719511765rem}}.alex-article__body table thead th,.alex-article__main__body table thead th,.typeset table thead th{font-size:1.3333333333rem;line-height:2rem;margin-bottom:-.56001rem;padding-bottom:1px;padding-top:.56001rem}@media screen and (min-width:48em){.alex-article__body table thead th,.alex-article__main__body table thead th,.typeset table thead th{font-size:1.2142857143rem;margin-bottom:-.5992957143rem;padding-top:.5992957143rem}}@media screen and (min-width:62em){.alex-article__body table thead th,.alex-article__main__body table thead th,.typeset table thead th{font-size:1.2rem;margin-bottom:-.60401rem;padding-top:.60401rem}}@media screen and (min-width:75em){.alex-article__body table thead th,.alex-article__main__body table thead th,.typeset table thead th{font-size:1.1764705882rem;margin-bottom:-.6117747059rem;padding-top:.6117747059rem}}.alex-article__body .bold,.alex-article__body b,.alex-article__body strong,.alex-article__main__body .bold,.alex-article__main__body b,.alex-article__main__body strong,.typeset .bold,.typeset b,.typeset strong{font-family:Georgia,serif;font-weight:700}.alex-article__body .italic,.alex-article__body em,.alex-article__body i,.alex-article__main__body .italic,.alex-article__main__body em,.alex-article__main__body i,.typeset .italic,.typeset em,.typeset i{font-family:Georgia,serif;font-style:italic}.alex-article__body .caption,.alex-article__body small,.alex-article__main__body .caption,.alex-article__main__body small,.typeset .caption,.typeset small{font-family:Helvetica,sans-serif;font-size:1.0666666667rem;font-style:normal;font-weight:400}@media screen and (min-width:48em){.alex-article__body .caption,.alex-article__body small,.alex-article__main__body .caption,.alex-article__main__body small,.typeset .caption,.typeset small{font-size:.9714285714rem}}@media screen and (min-width:62em){.alex-article__body .caption,.alex-article__body small,.alex-article__main__body .caption,.alex-article__main__body small,.typeset .caption,.typeset small{font-size:.96rem}}@media screen and (min-width:75em){.alex-article__body .caption,.alex-article__body small,.alex-article__main__body .caption,.alex-article__main__body small,.typeset .caption,.typeset small{font-size:.8823529412rem}}.alex-article__body small,.alex-article__main__body small,.typeset small{line-height:1rem}.alex-article__body .caption,.alex-article__main__body .caption,.typeset .caption{color:#bdc8cc;line-height:2rem;margin-bottom:1.35199rem;padding-top:.64801rem}@media screen and (min-width:48em){.alex-article__body .caption,.alex-article__main__body .caption,.typeset .caption{margin-bottom:1.3205614286rem;padding-top:.6794385714rem}}@media screen and (min-width:62em){.alex-article__body .caption,.alex-article__main__body .caption,.typeset .caption{margin-bottom:1.31679rem;padding-top:.68321rem}}@media screen and (min-width:75em){.alex-article__body .caption,.alex-article__main__body .caption,.typeset .caption{margin-bottom:1.2911664706rem;padding-top:.7088335294rem}}.alex-article__body .alpha+.caption,.alex-article__body .beta+.caption,.alex-article__body .gamma+.caption,.alex-article__body h1+.caption,.alex-article__body h2+.caption,.alex-article__body h3+.caption,.alex-article__main__body .alpha+.caption,.alex-article__main__body .beta+.caption,.alex-article__main__body .gamma+.caption,.alex-article__main__body h1+.caption,.alex-article__main__body h2+.caption,.alex-article__main__body h3+.caption,.typeset .alpha+.caption,.typeset .beta+.caption,.typeset .gamma+.caption,.typeset h1+.caption,.typeset h2+.caption,.typeset h3+.caption{margin-top:-1rem}.alex-article__body .delta+.caption,.alex-article__body .epsilon+.caption,.alex-article__body .zeta+.caption,.alex-article__main__body .delta+.caption,.alex-article__main__body .epsilon+.caption,.alex-article__main__body .zeta+.caption,.typeset .delta+.caption,.typeset .epsilon+.caption,.typeset .zeta+.caption{margin-top:0}.alex-article__body blockquote p,.alex-article__main__body blockquote p,.typeset blockquote p{border-left:.15rem solid #333;font-style:italic;margin-bottom:1.87999rem;padding-bottom:.56001rem;padding-left:1rem}@media screen and (min-width:48em){.alex-article__body blockquote p,.alex-article__main__body blockquote p,.typeset blockquote p{margin-bottom:1.8014185714rem;padding-bottom:.5992957143rem}}@media screen and (min-width:62em){.alex-article__body blockquote p,.alex-article__main__body blockquote p,.typeset blockquote p{margin-bottom:1.79199rem;padding-bottom:.60401rem}}@media screen and (min-width:75em){.alex-article__body blockquote p,.alex-article__main__body blockquote p,.typeset blockquote p{margin-bottom:1.7764605882rem;padding-bottom:.6117747059rem}}@media(min-width:577px){.alex-article__body blockquote,.alex-article__main__body blockquote,.typeset blockquote{margin-left:-1rem}}.alex-article__body hr,.alex-article__main__body hr,.typeset hr{background-image:linear-gradient(180deg,transparent 50%,#bdc8cc 0);background-position:0 50%;background-repeat:repeat-x;background-size:100% .15rem;border:0;margin:0;padding-bottom:3rem;padding-top:3rem}.alex-article__body .upper,.alex-article__main__body .upper,.typeset .upper{font-kerning:normal;letter-spacing:.1rem;text-transform:uppercase}.alex-article__body .small-caps,.alex-article__main__body .small-caps,.typeset .small-caps{-webkit-font-feature-settings:"smcp","kern";font-feature-settings:"smcp","kern";font-kerning:normal;letter-spacing:.1rem}.alex-article__body .lining-numerals,.alex-article__main__body .lining-numerals,.typeset .lining-numerals{-webkit-font-feature-settings:"lnum","kern";font-feature-settings:"lnum","kern"}.alex-article__body .oldstyle-numerals,.alex-article__main__body .oldstyle-numerals,.typeset .oldstyle-numerals{-webkit-font-feature-settings:"onum","kern";font-feature-settings:"onum","kern"}*{font-family:Avenir Next,Avenir,Arial,sans-serif}.alex-article__main__byline{padding-bottom:5px}.wf-active .heading{font-family:Overpass,sans-serif}.heading a,.heading a:visited{color:#333}.align-left{text-align:left}.align-right{text-align:right}.align-center{text-align:center}h1,h2,h3,h4,ul.pager,ul.pagination{color:#333}.wf-active h1,.wf-active h2,.wf-active h3,.wf-active h4,.wf-active ul.pager,.wf-active ul.pagination{font-family:Overpass,sans-serif}h1,h2{text-transform:uppercase}a,a:focus,a:hover,a:visited{transition:color .4s ease-out,background .2s ease-in}.spacer{font-size:60px;line-height:20px;margin:0;position:relative;top:-35px}.alex-card{border-bottom:1px solid #000;display:flex;margin-bottom:1em;padding-bottom:1em;padding-right:1em}.alex-card__content--container{flex:3 1}.alex-card__media--container{flex:1 1;padding:1em 0 1em 1em}.alex-card__title h3{margin:0}.alex-card__abstract p{margin:.5em 0}.alex-card__image{flex:1 1;margin-left:1em;margin-right:-1em;margin-top:1em}.alex-card__image img{display:block;height:auto;max-width:100%;min-height:100px;padding-right:0}</style><meta name="generator" content="Gatsby 4.4.0"/><title data-react-helmet="true">Changing object permissions in large S3 buckets - Alex Wilson</title><link data-react-helmet="true" rel="alternate" type="application/rss+xml" title="Alex Wilson&#x27;s writing via RSS" href="/feed.xml"/><link data-react-helmet="true" rel="webmention" href="https://webmention.io/alexwilson.tech/webmention"/><link data-react-helmet="true" rel="pingback" href="https://webmention.io/alexwilson.tech/xmlrpc"/><meta data-react-helmet="true" name="description" content="Of all of the services Amazon Web Services pushes, S3 (Simple Storage Service) is maybe the most versatile and well-known: It “just works…"/><meta data-react-helmet="true" property="og:title" content="Changing object permissions in large S3 buckets"/><meta data-react-helmet="true" property="og:description" content="Of all of the services Amazon Web Services pushes, S3 (Simple Storage Service) is maybe the most versatile and well-known: It “just works…"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@antoligy"/><meta data-react-helmet="true" name="twitter:title" content="Changing object permissions in large S3 buckets"/><meta data-react-helmet="true" name="twitter:description" content="Of all of the services Amazon Web Services pushes, S3 (Simple Storage Service) is maybe the most versatile and well-known: It “just works…"/><script data-react-helmet="true" type="application/ld+json">{"@type":"WebPage","@context":"http://schema.org","name":"Alex Wilson","description":"Software Engineer, Technical Architect — Helping build a better, faster internet.","copyrightHolder":{"@type":"Person","name":"Alex","memberOf":{"@type":"Organization","@context":"http://schema.org","name":"Alex Wilson","logo":{"@type":"ImageObject","@context":"http://schema.org","url":"https://avatars.githubusercontent.com/u/440052","width":460,"height":460},"url":"https://alexwilson.tech","sameAs":["https://www.twitter.com/AlexWilsonV1","https://www.linkedin.com/in/alex-","https://github.com/alexwilson"]},"givenName":"Alex","familyName":"Wilson"},"publisher":{"@type":"Organization","@context":"http://schema.org","name":"Alex Wilson","logo":{"@type":"ImageObject","@context":"http://schema.org","url":"https://avatars.githubusercontent.com/u/440052","width":460,"height":460},"url":"https://alexwilson.tech","sameAs":["https://www.twitter.com/AlexWilsonV1","https://www.linkedin.com/in/alex-","https://github.com/alexwilson"]}}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://alexwilson.tech/content/4fa644e5-2101-4788-abfe-d2d28d9ef0a0"},"url":"https://alexwilson.tech/content/4fa644e5-2101-4788-abfe-d2d28d9ef0a0","headline":"Changing object permissions in large S3 buckets","dateModified":"2017-11-30T20:44:00.000Z","datePublished":"2017-11-30T20:44:00.000Z","publisher":{"@type":"Organization","@context":"http://schema.org","name":"Alex Wilson","logo":{"@type":"ImageObject","@context":"http://schema.org","url":"https://avatars.githubusercontent.com/u/440052","width":460,"height":460},"url":"https://alexwilson.tech","sameAs":["https://www.twitter.com/AlexWilsonV1","https://www.linkedin.com/in/alex-","https://github.com/alexwilson"]},"author":{"@type":"Person","name":"Alex","memberOf":{"@type":"Organization","@context":"http://schema.org","name":"Alex Wilson","logo":{"@type":"ImageObject","@context":"http://schema.org","url":"https://avatars.githubusercontent.com/u/440052","width":460,"height":460},"url":"https://alexwilson.tech","sameAs":["https://www.twitter.com/AlexWilsonV1","https://www.linkedin.com/in/alex-","https://github.com/alexwilson"]},"givenName":"Alex","familyName":"Wilson"},"image":null,"description":""}</script><link href="https://github.githubassets.com/assets/gist-embed-b3b573358bfc66d89e1e95dbf8319c09.css" rel="stylesheet"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link as="script" rel="preload" href="/webpack-runtime-28b5408ddb36d5ab775b.js"/><link as="script" rel="preload" href="/framework-598cd9aaf384968585ad.js"/><link as="script" rel="preload" href="/app-fb1cca7b4af3e32cbae2.js"/><link as="script" rel="preload" href="/commons-3ee01686ce94dbba5d1e.js"/><link as="script" rel="preload" href="/cb5cb53273f78cdc3b816e499f3cf36a548fa93d-7741add23afc3d3a0db8.js"/><link as="script" rel="preload" href="/b52535259c17faaf86c91dcacb99004666dc8a7e-6e9a8ceca815bf5ba734.js"/><link as="script" rel="preload" href="/component---src-templates-article-js-b47b31bf08ac94d36c16.js"/><link as="fetch" rel="preload" href="/page-data/content/4fa644e5-2101-4788-abfe-d2d28d9ef0a0/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2203825502.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/63159454.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header role="banner" class="alex-header"><div class="alex-header-image"><picture class="alex-header-image--container"><img alt="Header" class="alex-header-image__blur"/><img alt="Header" class="alex-header-image__main" style="opacity:0"/></picture></div><div class="alex-header--container"><div class="alex-header__about"><h1 class="alex-header__name">Alex Wilson</h1><span class="alex-header__intro">Software Engineer, Technical Architect — Helping build a better, faster internet.</span></div><nav><ul class="alex-header__nav" id="menu"><li class="alex-header__nav-item null"><a aria-current="page" class="" href="/">Home</a></li><li class="alex-header__nav-item null"><a href="/about-me/">About Me</a></li><li class="alex-header__nav-item null"><a href="/blog/">Blog</a></li><li class="alex-header__nav-item null"><a href="/talks/">Talks</a></li><li class="alex-header__nav-item null"><a href="/consultancy/">Hire Me</a></li><li class="alex-header__nav-item alex-header__nav-item--spacer"></li><li class="alex-header__nav-item null"><a rel="me" href="https://twitter.com/AlexWilsonV1"><img src="/svg/twitter.svg" alt="Twitter" class="large" height="1em"/></a></li><li class="alex-header__nav-item null"><a rel="me" href="https://www.linkedin.com/in/alex-/"><img src="/svg/linkedin.svg" alt="LinkedIn" class="large" height="1em"/></a></li><li class="alex-header__nav-item null"><a rel="me" href="https://github.com/alexwilson"><img src="/svg/github.svg" alt="Github" class="large" height="1em"/></a></li></ul></nav></div></header><main><div class="alex-article"><div class="alex-article__main"><h1 itemProp="name headline">Changing object permissions in large S3 buckets</h1><div class="alex-article__main__byline">Posted<!-- --> by <span itemProp="author" itemType="http://schema.org/Person"><a href="/"><span itemProp="name">Alex</span></a></span> on <time class="alex-article__main__date" dateTime="Thu Nov 30 2017 20:44:00 GMT+0000 (Coordinated Universal Time)" itemProp="datePublished">Thursday, November 30th, 2017</time>.</div><article class="alex-article__body article-description" itemProp="articleBody"><p>Of all of the services Amazon Web Services pushes, S3 (Simple Storage Service) is maybe the most versatile and well-known: It “just works” and is a fantastic service for many use-cases.
It turns out though that you can have too much of a good thing as many have learned <a href="https://www.theregister.co.uk/2017/03/01/aws_s3_outage/">including Amazon</a>, and recently I have run into a reminder that S3’s API still leaves a little to be desired.</p>
<h2>The problem</h2>
<p>My use-case was pretty simple.  I had a bucket with about 2.5 million objects and needed to update the ACL on these objects to make them publicly readable.  Simple enough ... right?</p>
<p>Usually I would approach such a task by changing the bucket policies to apply to all objects regardless of their own ACLs, yet here I did not have the option to change the bucket policies, and even so, this would have caused problems for any systems relying upon canned Object ACLs.</p>
<h2>The solution</h2>
<p>I wrote a small program in Go to recursively update S3 object permissions to any canned ACL.  It’s documented and downloadable here: <a href="https://github.com/alexwilson/s3-recursive-acl/">https://github.com/alexwilson/s3-recursive-acl/</a></p>
<p>I hope that this is useful as it stands, and I am keen to hear any suggestions on how I can improve the methodology (did I miss something?) as well as the program itself.</p>
<p>Some more notes on how I came to this conclusion, and general thoughts on S3 and Golang after the break!</p>
<hr>
<h3>Attempt #1 — Read the docs</h3>
<p>Amazon’s documentation is very comprehensive when you know where to look.  Sadly, I could not find anything that helped.  Ask around AWS practitioners and Solutions Architects the consensus was that I might need to write something custom to solve this problem.  Grr, but maybe there is something, and it's just buried deep within the docs!</p>
<p>The file operations beneath the <code class="language-text">aws s3</code>  command line, it makes sense that there’s nothing oriented towards modifying AWS ACL in here.  I was a bit disappointed that there was nothing beneath the S3API itself, however, as recursively changing permissions (still) seems like a reasonable use-case!</p>
<p>I’m glad that the documentation is fairly conclusive, which is pretty refreshing given the spurious nature of documentation in competing services.  I’m hoping that a future version of the S3 API might introduce this functionality or something analogous to it!</p>
<h3>Attempt #2 — Try to recursively update all Object metadata</h3>
<p>This was a bit silly.  Various StackOverflow answers for tangentially related problems suggest that something like this might work:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=alex data-host=localhost></span></span>aws s3 <span class="token function">cp</span> --metadata <span class="token assign-left variable">FOO</span><span class="token operator">=</span>bar --recursive --acl public-read --profile test--prod s3://test-bucket-2/files/ s3://test-bucket-2/files/</code></pre></div>
<p>It didn’t as no metadata was being changed.  It could have been an ideal approach as no API calls would need to be made from my machine for this operation to complete.</p>
<h3>Attempt #3 — Start instrumenting the S3 API myself</h3>
<p><code class="language-text">putObjectAcl</code> is super nice as far as API methods go.  It’s a full PUT for a given object, but only for its metadata, so all I need to know is the key and the new ACL document.</p>
<p>To save some time I started looking at the SDKs and quickly found the stellar work in the <a href="https://aws.amazon.com/sdk-for-go/">Golang SDK</a>.
It’s got the same base functionality as other SDKs, but with nice features such as automatic pagination (which is a huge time-saver especially in AWS where pagination can be non-linear and involves keeping track of tokens) and not enforcing a particular concurrency model.</p>
<p>This seemed ideal as it allowed me to implement a simplistic, yet elegant, approach:</p>
<ol>
<li>Iterate over pages of 1000 objects at a time, recursively listing by a given key.</li>
<li>Spin-off Goroutines to run <code class="language-text">putObjectACL</code> for each child key.</li>
<li>Wait for the Goroutines to complete before exiting.</li>
</ol>
<p>I could’ve done something nicer here such as implementing a proper worker pool pattern, however, my batch sizes and concurrency requirements aren’t yet nearly large enough to justify this.  Maybe this is a possible improvement for the future!</p>
<p>Goroutines were essential with this approach as it had to perform well. I effectively ran 2.5 thousand API calls to list the objects in this bucket and a further 2.5 million API calls to update those object permissions.</p>
<p>And it ran <em>beautifully</em>.  In just over an hour all 2.5 million objects had the correct ACL!</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="command-line-prompt"><span data-user=alex data-host=localhost></span></span><span class="token assign-left variable">AWS_PROFILE</span><span class="token operator">=</span>test--profile ./s3-recursive-acl --bucket test-bucket-1 --region ap-northeast-1 --path test/</code></pre></div>
<h4>Go-tchas</h4>
<p>Not specific to this particular project, there are a few things in Golang that will definitely throw people off which I addressed whilst writing this.</p>
<p>Passing pointers to Goroutines is very risky as the pointers can and will be reassigned.  <em>Always</em> make a copy of the true value you want first.  You can convert formats within the Goroutine itself if performance is a concern (in order not to block).</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go">        <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> object <span class="token operator">:=</span> <span class="token keyword">range</span> page<span class="token punctuation">.</span>Contents <span class="token punctuation">{</span>
            <span class="token comment">// Make a copy of the value allocated to the pointer before we do anything with it!</span>
            key <span class="token operator">:=</span> <span class="token operator">*</span>object<span class="token punctuation">.</span>Key
        <span class="token punctuation">}</span></code></pre></div>
<p>Goroutines logically run outside of the main scope of the application, and while this means sometimes they will run concurrently in the main thread, the application will not wait for Goroutines to complete, so you can’t guarantee that your operations will even run!</p>
<p>Thankfully <a href="https://golang.org/pkg/sync/#WaitGroup">WaitGroup</a> was added to the sync standard library to solve this problem, and it is ridiculously simple to get up and running with.</p>
<p>Instantiate a WaitGroup, and instruct the application to block until the WaitGroup is terminated.  For every non-blocking operation that is spun up, increment the WaitGroup counter, and then reduce it when the operations complete.  This approach works well and has virtually no footprint.</p>
<div class="gatsby-highlight" data-language="go"><pre class="language-go"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token comment">// Create a WaitGroup</span>
    <span class="token keyword">var</span> wg sync<span class="token punctuation">.</span>WaitGroup

    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// Ask the WaitGroup to wait.</span>
        wg<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token comment">// Do some work here.</span>

        <span class="token comment">// Tell the WaitGroup we're done</span>
        <span class="token keyword">defer</span> wg<span class="token punctuation">.</span><span class="token function">Done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Block until our tasks are done.</span>
    wg<span class="token punctuation">.</span><span class="token function">Wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>Wrap-up</h3>
<p>I’m glad that S3 is this simple to orchestrate.  Being able to make this many Object Metadata changes this quickly (2.5 million objects in just over an hour?  That’s ~600req/s!) without being throttled is pretty spectacular. (I’m sure that running this actually within an EC2 in the same region would make this quicker)</p>
<p>Also: Golang is invaluable for writing these super-performant scripts.  Every time I’ve had the chance to use it to tackle a problem, I’ve found it intuitive and quick to write and run.  I hope to have more of opportunities to use it in future work.  I’m thankful that I took the time to look at other options and languages first otherwise I wouldn’t have been done so quickly!</p>
<p>I got a chance to try out the <a href="https://glide.sh/">Glide packaging system</a> for this project, and it is really, <em>really</em> nice.  Recommended for projects of all shapes and sizes, and I will be using it for my future Golang hacks!</p>
<p><a href="https://github.com/alexwilson/s3-recursive-acl/">Download S3-recursive-acl here</a></p></article><hr/><h3 class="share">Share</h3><div class="alex-share"><ul><li><a href="https://twitter.com/intent/tweet?url=https://alexwilson.tech/content/4fa644e5-2101-4788-abfe-d2d28d9ef0a0&amp;amp;text=Changing object permissions in large S3 buckets&amp;amp;related=AlexWilsonV1&amp;amp;via=AlexWilsonV1"><img src="/svg/twitter.svg" alt="Twitter" title="Share on Twitter"/></a></li><li><a href="http://www.facebook.com/sharer.php?u=https://alexwilson.tech/content/4fa644e5-2101-4788-abfe-d2d28d9ef0a0&amp;amp;t=Changing object permissions in large S3 buckets"><img src="/svg/facebook.svg" alt="Facebook" title="Share on Facebook"/></a></li><li><a href="http://www.linkedin.com/shareArticle?mini=true&amp;amp;url=https://alexwilson.tech/content/4fa644e5-2101-4788-abfe-d2d28d9ef0a0&amp;amp;title=Changing object permissions in large S3 buckets"><img src="/svg/linkedin.svg" alt="LinkedIn" title="Share on LinkedIn"/></a></li><li><a href="http://reddit.com/submit?url=https://alexwilson.tech/content/4fa644e5-2101-4788-abfe-d2d28d9ef0a0&amp;amp;title=Changing object permissions in large S3 buckets"><img src="/svg/reddit.svg" alt="Reddit" title="Share on Reddit"/></a></li></ul></div><div class="alex-webmentions"></div></div><div class="alex-article__aside"><div class="alex-article__topics"><strong>Topics: </strong><ul><li><a href="/topic/aws">aws</a></li></ul></div><div class="alex-article__recommended"><h2>Read Next</h2><div class="alex-card"><div class="alex-card__content--container"><div class="alex-card__title"><h3><a href="/content/437f6d7b-3a32-4901-8546-d7bb69f77efb">Weeknotes — 16th February 2019</a></h3></div><div class="alex-card__abstract"><p></p></div><div class="alex-card__timetamp"><span class="dateline"><time dateTime="2019-02-16T00:00:00.000Z">16 Feb 2019</time></span></div></div></div><div class="alex-card"><div class="alex-card__content--container"><div class="alex-card__title"><h3><a href="/content/96878838-1ca9-4165-a36b-2373cf39c33a">Weeknotes: ReInvent — 8th December 2018</a></h3></div><div class="alex-card__abstract"><p></p></div><div class="alex-card__timetamp"><span class="dateline"><time dateTime="2018-12-08T23:19:00.000Z">8 Dec 2018</time></span></div></div></div><div class="alex-card"><div class="alex-card__content--container"><div class="alex-card__title"><h3><a href="/content/0e7b04bc-2ff0-489b-a9de-a608e76672d7">Weeknotes: Jetlag City — 1st December 2018</a></h3></div><div class="alex-card__abstract"><p></p></div><div class="alex-card__timetamp"><span class="dateline"><time dateTime="2018-12-01T23:19:00.000Z">1 Dec 2018</time></span></div></div></div></div></div></div></main><footer class="footer"><div class="container align-center"><span class="text-muted">© Alex Wilson <!-- -->2022</span></div></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-16800366-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(!(parseInt(navigator.doNotTrack) === 1 || parseInt(window.doNotTrack) === 1 || parseInt(navigator.msDoNotTrack) === 1 || navigator.doNotTrack === "yes")) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-16800366-1', 'alexwilson.tech', {"siteSpeedSampleRate":100});
      ga('set', 'anonymizeIp', true);
      ga('require', 'GTM-M22MJGG');
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/content/4fa644e5-2101-4788-abfe-d2d28d9ef0a0";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-c9fcda437b3438fcfaba.js"],"app":["/app-fb1cca7b4af3e32cbae2.js"],"component---src-pages-404-js":["/component---src-pages-404-js-565acc61b6f89291e428.js"],"component---src-pages-about-me-js":["/component---src-pages-about-me-js-b394bca8934baa3218fd.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-cc4c52c6e55caead9390.js"],"component---src-pages-consultancy-js":["/component---src-pages-consultancy-js-31dc989977d925ba263e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-5287d7dd7ec76eac2035.js"],"component---src-pages-talks-js":["/component---src-pages-talks-js-ce07dcd62ab25dac1b54.js"],"component---src-templates-article-js":["/component---src-templates-article-js-b47b31bf08ac94d36c16.js"],"component---src-templates-talk-js":["/component---src-templates-talk-js-ed5ec02a4ffd342c0561.js"],"component---src-templates-topic-js":["/component---src-templates-topic-js-db90050f8e4b1a02c713.js"]};/*]]>*/</script><script src="/polyfill-c9fcda437b3438fcfaba.js" nomodule=""></script><script src="/component---src-templates-article-js-b47b31bf08ac94d36c16.js" async=""></script><script src="/b52535259c17faaf86c91dcacb99004666dc8a7e-6e9a8ceca815bf5ba734.js" async=""></script><script src="/cb5cb53273f78cdc3b816e499f3cf36a548fa93d-7741add23afc3d3a0db8.js" async=""></script><script src="/commons-3ee01686ce94dbba5d1e.js" async=""></script><script src="/app-fb1cca7b4af3e32cbae2.js" async=""></script><script src="/framework-598cd9aaf384968585ad.js" async=""></script><script src="/webpack-runtime-28b5408ddb36d5ab775b.js" async=""></script></body></html>