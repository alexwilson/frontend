{"componentChunkName":"component---src-templates-article-js","path":"/content/09b2a1eb-4a1f-4087-b261-79ceee6e2bc6","result":{"data":{"content":{"contentId":"09b2a1eb-4a1f-4087-b261-79ceee6e2bc6","title":"Getting past CloudFlare","author":{"name":"alex"},"topics":[{"topicId":"383dbc67-f284-5743-b4e3-a4f6de7474c6","topic":"cloudflare","slug":"/topic/cloudflare"}],"date":"Sat Jan 17 2015 15:00:00 GMT+0000 (Coordinated Universal Time)","image":{"image":null,"credit":null},"content":{"html":"<p><a href=\"https://www.CloudFlare.com/\" title=\"CloudFlare\">CloudFlare</a> is a wonderful thing. An excellent DNS provider coupled with a hosted \"intelligent\" caching reverse proxy? Sign me up!</p>\n<p>Moreover, some of the functionality offered up by <a href=\"https://www.CloudFlare.com/\" title=\"CloudFlare\">CloudFlare</a> can only be described as awesome - From the ability to project a WAF over your entire site, to automatically minifying all static assets, to even offer a proprietary ESI alternative in the form of <a href=\"https://www.CloudFlare.com/railgun\">RailGun</a>.</p>\n<p>CloudFlare has powered my site, that of <a href=\"https://www.stormbit.net/\" title=\"CloudFlare\">StormBit</a>, the Pomf.se hosting service and countless others that I've been involved with over the past few years and all without a single hitch.  Alongside saving us bandwidth and offering lighting-fast DNS updates, unlimited DNS entries and flexible SSL, it has also kept sites serving content even when they have been down, or under heavy load.  With <a href=\"https://www.CloudFlare.com/\" title=\"CloudFlare\">CloudFlare</a> I can honestly say that small websites finally have a way of ensuring sites don't suffer the Slashdot effect.</p>\n<p>However this is not intended to be an advert for <a href=\"https://www.CloudFlare.com/\" title=\"CloudFlare\">CloudFlare</a>.  Rather I have been hit with their \"I'm under attack mode\", which is all well and good when one is actually under attack as it almost completely negates the ability of bots to hit applications and make away with precious bandwidth.  Unfortunately I'm not quite a bot, and instead of trying to steal bandwidth or steal email addresses, I'm trying to scrape information (for playlists) from websites which is at least a tiny bit less insidious.</p>\n<p>Looking over how CloudFlare decides whether or not I am a bot, it evaluates Javascript in the browser to solve a challenge, and this challenge is per-domain, per-IP, per-session and per-useragent so I can't just solve the challenge once and add it to all my cookie jars.  Additionally, there is no sane way of manually adding all of the required cookies to new cookie jars, so that's not an option either.</p>\n<p>My most immediate thought was to try and solve by guessing patterns and capturing values with regular expressions, however CloudFlare's engineers are several steps ahead and are actually obfuscating their challenge payload.</p>\n<p>After trying a bit of trickery in node.js to try and capture and evaluate the challenge, I realised that there's already a far simpler way around this- Using a browser testing engine such as PhantomJS.</p>\n<p>Ten minutes later, I had whipped together the following, which at time of writing allows my scraping tools past CloudFlare with negligable failures.</p>\n<p><div id=\"gist18448887\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\" data-color-mode=\"light\" data-light-theme=\"light\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container\">\n  <div id=\"file-cloudflare-challenge-js\" class=\"file my-2\">\n    \n    <div itemprop=\"text\"\n      class=\"Box-body p-0 blob-wrapper data type-javascript  \"\n      style=\"overflow: auto\" tabindex=\"0\" role=\"region\"\n      aria-label=\"cloudflare-challenge.js content, created by alexwilson on 03:31PM on January 17, 2015.\"\n    >\n\n        \n<div class=\"js-check-hidden-unicode js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path>\n</svg>\n    <span>\n      This file contains hidden or bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a class=\"Link--inTextBlock\" href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">        <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">    Show hidden characters\n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path d=\"M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z\"></path>\n</svg>\n</span></template>\n\n  <table data-hpc class=\"highlight tab-size js-file-line-container\" data-tab-size=\"4\" data-paste-markdown-skip data-tagsearch-path=\"cloudflare-challenge.js\">\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L1\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>/**</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L2\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC2\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * This is a project designed to get around sites using Cloudflare&#39;s &quot;I&#39;m under attack&quot; mode.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L3\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC3\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * Using the PhantomJS headless browser, it queries a site given to it as the second parameter,</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L4\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC4\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> *  waits six seconds and returns the cookies required to continue using this site.  With this, </span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L5\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC5\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> *  it is possible to automate scrapers or spiders that would otherwise be thwarted by Cloudflare&#39;s </span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L6\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"6\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC6\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> *  anti-bot protection.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L7\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"7\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC7\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * </span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L8\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"8\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC8\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * To run this: phantomjs cloudflare-challenge.js http://www.example.org/</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L9\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"9\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC9\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> *</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L10\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"10\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC10\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * Copyright © 2015 by Alex Wilson &lt;antoligy@antoligy.com&gt;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L11\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"11\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC11\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * </span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L12\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"12\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC12\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * Permission to use, copy, modify, and/or distribute this software for</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L13\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"13\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC13\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * any purpose with or without fee is hereby granted, provided that the</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L14\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"14\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC14\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * above copyright notice and this permission notice appear in all</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L15\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"15\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC15\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * copies.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L16\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"16\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC16\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * </span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L17\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"17\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC17\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot; AND ISC DISCLAIMS ALL WARRANTIES WITH</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L18\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"18\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC18\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L19\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"19\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC19\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL ISC BE LIABLE FOR ANY</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L20\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"20\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC20\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L21\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"21\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC21\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L22\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"22\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC22\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L23\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"23\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC23\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L24\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"24\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC24\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> */</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L25\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"25\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC25\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L26\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"26\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC26\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L27\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"27\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC27\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>/**</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L28\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"28\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC28\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * Namespaced object.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L29\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"29\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC29\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * <span class=pl-k>@type</span> {<span class=pl-smi>Object</span>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L30\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"30\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC30\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> */</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L31\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"31\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC31\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-k>var</span> <span class=pl-s1>antoligy</span> <span class=pl-c1>=</span> <span class=pl-s1>antoligy</span> <span class=pl-c1>||</span> <span class=pl-kos>{</span><span class=pl-kos>}</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L32\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"32\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC32\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L33\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"33\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC33\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>/**</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L34\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"34\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC34\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * Simple wrapper to retrieve Cloudflare&#39;s &#39;solved&#39; cookie.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L35\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"35\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC35\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * <span class=pl-k>@type</span> {<span class=pl-smi>Object</span>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L36\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"36\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC36\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> */</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L37\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"37\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC37\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>antoligy</span><span class=pl-kos>.</span><span class=pl-c1>cloudflareChallenge</span> <span class=pl-c1>=</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L38\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"38\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC38\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L39\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"39\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC39\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-c1>webpage</span>:\t<span class=pl-c1>false</span><span class=pl-kos>,</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L40\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"40\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC40\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-c1>system</span>:\t\t<span class=pl-c1>false</span><span class=pl-kos>,</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L41\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"41\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC41\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-c1>page</span>:\t\t<span class=pl-c1>false</span><span class=pl-kos>,</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L42\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"42\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC42\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-c1>url</span>:\t\t<span class=pl-c1>false</span><span class=pl-kos>,</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L43\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"43\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC43\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-c1>userAgent</span>:\t<span class=pl-c1>false</span><span class=pl-kos>,</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L44\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"44\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC44\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L45\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"45\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC45\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-c>/**</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L46\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"46\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC46\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>\t * Initiate object.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L47\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"47\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC47\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>\t */</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L48\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"48\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC48\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-en>init</span>: <span class=pl-k>function</span><span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L49\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"49\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC49\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>webpage</span>\t<span class=pl-c1>=</span> <span class=pl-en>require</span><span class=pl-kos>(</span><span class=pl-s>&#39;webpage&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L50\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"50\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC50\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>system</span>\t\t<span class=pl-c1>=</span> <span class=pl-en>require</span><span class=pl-kos>(</span><span class=pl-s>&#39;system&#39;</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L51\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"51\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC51\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>page</span>\t\t<span class=pl-c1>=</span> <span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>webpage</span><span class=pl-kos>.</span><span class=pl-en>create</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L52\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"52\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC52\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>url</span>\t\t<span class=pl-c1>=</span> <span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>system</span><span class=pl-kos>.</span><span class=pl-c1>args</span><span class=pl-kos>[</span><span class=pl-c1>1</span><span class=pl-kos>]</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L53\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"53\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC53\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>userAgent</span>\t<span class=pl-c1>=</span> <span class=pl-s>&#39;Mozilla/5.0 (Windows NT 6.3; rv:36.0) Gecko/20100101 Firefox/36.0&#39;</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L54\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"54\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC54\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>timeout</span>\t<span class=pl-c1>=</span> <span class=pl-c1>6000</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L55\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"55\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC55\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-kos>}</span><span class=pl-kos>,</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L56\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"56\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC56\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L57\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"57\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC57\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-c>/**</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L58\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"58\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC58\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>\t * &quot;Solve&quot; Cloudflare&#39;s challenge using PhantomJS&#39;s engine.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L59\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"59\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC59\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>\t * <span class=pl-k>@return</span> {<span class=pl-smi>String</span>} JSON containing our cookies.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L60\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"60\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC60\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>\t */</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L61\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"61\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC61\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-en>solve</span>: <span class=pl-k>function</span><span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L62\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"62\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC62\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-k>var</span> <span class=pl-s1>self</span> <span class=pl-c1>=</span> <span class=pl-smi>this</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L63\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"63\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC63\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>page</span><span class=pl-kos>.</span><span class=pl-c1>settings</span><span class=pl-kos>.</span><span class=pl-c1>userAgent</span> <span class=pl-c1>=</span> <span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>userAgent</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L64\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"64\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC64\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>page</span><span class=pl-kos>.</span><span class=pl-en>open</span><span class=pl-kos>(</span><span class=pl-smi>this</span><span class=pl-kos>.</span><span class=pl-c1>url</span><span class=pl-kos>,</span> <span class=pl-k>function</span><span class=pl-kos>(</span><span class=pl-s1>status</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L65\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"65\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC65\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t<span class=pl-en>setTimeout</span><span class=pl-kos>(</span><span class=pl-k>function</span><span class=pl-kos>(</span><span class=pl-kos>)</span> <span class=pl-kos>{</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L66\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"66\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC66\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t<span class=pl-smi>console</span><span class=pl-kos>.</span><span class=pl-en>log</span><span class=pl-kos>(</span><span class=pl-c1>JSON</span><span class=pl-kos>.</span><span class=pl-en>stringify</span><span class=pl-kos>(</span><span class=pl-s1>phantom</span><span class=pl-kos>.</span><span class=pl-c1>cookies</span><span class=pl-kos>)</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L67\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"67\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC67\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t\t<span class=pl-s1>phantom</span><span class=pl-kos>.</span><span class=pl-en>exit</span><span class=pl-kos>(</span><span class=pl-kos>)</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L68\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"68\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC68\" class=\"blob-code blob-code-inner js-file-line\">\t\t\t<span class=pl-kos>}</span><span class=pl-kos>,</span> <span class=pl-s1>self</span><span class=pl-kos>.</span><span class=pl-c1>timeout</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L69\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"69\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC69\" class=\"blob-code blob-code-inner js-file-line\">\t\t<span class=pl-kos>}</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L70\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"70\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC70\" class=\"blob-code blob-code-inner js-file-line\">\t<span class=pl-kos>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L71\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"71\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC71\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L72\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"72\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC72\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-kos>}</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L73\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"73\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC73\" class=\"blob-code blob-code-inner js-file-line\">\n</td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L74\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"74\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC74\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c>/**</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L75\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"75\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC75\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> * In order to carry on making requests, both user agent and IP address must what is returned here.</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L76\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"76\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC76\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-c> */</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L77\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"77\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC77\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>antoligy</span><span class=pl-kos>.</span><span class=pl-c1>cloudflareChallenge</span><span class=pl-kos>.</span><span class=pl-en>init</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-cloudflare-challenge-js-L78\" class=\"blob-num js-line-number js-blob-rnum\" data-line-number=\"78\"></td>\n          <td id=\"file-cloudflare-challenge-js-LC78\" class=\"blob-code blob-code-inner js-file-line\"><span class=pl-s1>antoligy</span><span class=pl-kos>.</span><span class=pl-c1>cloudflareChallenge</span><span class=pl-kos>.</span><span class=pl-en>solve</span><span class=pl-kos>(</span><span class=pl-kos>)</span><span class=pl-kos>;</span></td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/alexwilson/f4f084b87946f84a89b4/raw/703ed2d82e40e824911533031187c207aaebd99b/cloudflare-challenge.js\" style=\"float:right\" class=\"Link--inTextBlock\">view raw</a>\n        <a href=\"https://gist.github.com/alexwilson/f4f084b87946f84a89b4#file-cloudflare-challenge-js\" class=\"Link--inTextBlock\">\n          cloudflare-challenge.js\n        </a>\n        hosted with &#10084; by <a class=\"Link--inTextBlock\" href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>*[WAF]: Web Application Firewall\n*[ESI]: Edge Server Includes</p>","excerpt":"CloudFlare is a wonderful thing. An excellent DNS provider coupled with a hosted \"intelligent\" caching reverse proxy? Sign me up! Moreover…"},"slug":"/content/09b2a1eb-4a1f-4087-b261-79ceee6e2bc6"},"site":{"siteMetadata":{"siteUrl":"https://alexwilson.tech"}}},"pageContext":{"contentId":"09b2a1eb-4a1f-4087-b261-79ceee6e2bc6"}},"staticQueryHashes":["63159454","955950066"],"slicesMap":{}}